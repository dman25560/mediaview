var mvAdmin={};mvAdmin.initialize=function(a){mvAdmin.setupEvents(a)},mvAdmin.setupEvents=function(a){a(function(){a("div.updated, div.e-message").delay(3e3).queue(function(){a(this).remove()}),a(".mv-sortable-table tbody").sortable({placeholder:"mv-sortable-placeholder",handle:".mv-sortable-handle",opacity:.8,containment:"parent",stop:function(b,c){var d=a(".mv-sortable-table tbody").sortable("toArray").toString(),e={action:"mv_orderupdate",order:d};a.post(ajaxurl,e,function(a){})}}).disableSelection(),a(".mv-delete-shortcode").click(function(){if(!confirm(mvJSData.translations.confirmShortcodeDelete))return!1;var b=a(this).parents("tr"),c=b.attr("id"),d={action:"mv_deleteshortcode",key:c,nonce:mvJSData.nonces.deleteShortcode};return a.post(ajaxurl,d,function(a){a&&b.fadeOut(400,function(){b.remove()})}),!1}),a("#resetColor").click(function(){return a("#vimeoControlColor").val("#00adef"),!1}),a("#mvSaveOptions").click(function(){var b=!1;if(a("#mvSaveOptionsFrm input").removeClass("mv-error-field"),""==a("#vimeoControlColor").val()&&(a("#vimeoControlColor").addClass("mv-error-field"),b=!0),b)return!1}),a(".mv-delete-item").click(function(){if(!confirm(mvJSData.translations.confirmItemDelete))return!1;var b=a(this).parents("tr"),c=b.attr("id"),d={action:"mv_deleteitem",key:c,nonce:mvJSData.nonces.deleteItem};return a.post(ajaxurl,d,function(a){a&&b.fadeOut(400,function(){b.remove()})}),!1}),a("#mediaType").change(function(){var b=this.value;a("#vimeoURLBox, #youtubeURLBox, #photoURLBox, #resBox").css("display","none"),"vimeo"==b?a("#vimeoURLBox").css("display","block"):"youtube"==b?a("#youtubeURLBox, #resBox").css("display","block"):"photo"==b&&a("#photoURLBox").css("display","block")}),a("#vimeoURLInput, #youtubeURLInput, #photoURLInput").live("propertychange keyup input paste",function(){""==this.value?a("#mvSaveMedia").attr("disabled","disabled"):a("#mvSaveMedia").removeAttr("disabled")});var b=!0;_orig_send_attachment=wp.media.editor.send.attachment,a("#photoURLInput").click(function(c){var e=(wp.media.editor.send.attachment,a(this)),f=e.attr("id").replace("_button","");return b=!0,wp.media.editor.send.attachment=function(c,d){return b?(d.sizes.large?a("#"+f).val(d.sizes.large.url):a("#"+f).val(d.sizes.full.url),void(""==a("#"+f).val()?a("#mvSaveMedia").attr("disabled","disabled"):a("#mvSaveMedia").removeAttr("disabled"))):_orig_send_attachment.apply(this,[c,d])},wp.media.editor.open(e),!1}),a(".add_media").on("click",function(){b=!1}),a("#mvSaveMedia").click(function(){var b=!1;if(a("#mvSaveMediaFrm input").removeClass("mv-error-field"),""==a("#mediaType").val()&&(a("#mediaType").addClass("mv-error-field"),b=!0),"Vimeo"==a("#mediaType").val()&&""==a("#vimeoURLInput").val()&&(a("#vimeoURLInput").addClass("mv-error-field"),b=!0),"Youtube"==a("#mediaType").val()&&""==a("#youtubeURLInput").val()&&(a("#youtubeURLInput").addClass("mv-error-field"),b=!0),"Photo"==a("#mediaType").val()&&""==a("#photoURLInput").val()&&(a("#photoURLInput").addClass("mv-error-field"),b=!0),b)return!1}),a("#resetHeight").click(function(){return a("#displayHeight").val("400"),!1}),a("#resetCanvasColor").click(function(){return a("#canvasColor").val("#111"),!1}),a("#resetCaptionColor").click(function(){return a("#captionColor").val("#fff"),!1}),a("#mvSaveShortcodeEdit").click(function(){var b=!1;if(a("#mvSaveShortcodeEditFrm input").removeClass("mv-error-field"),""==a("#shortName").val()&&(a("#shortName").addClass("mv-error-field"),b=!0),""==a("#displayHeight").val()&&(a("#displayHeight").addClass("mv-error-field"),b=!0),""==a("#canvasColor").val()&&(a("#canvasColor").addClass("mv-error-field"),b=!0),""==a("#captionColor").val()&&(a("#captionColor").addClass("mv-error-field"),b=!0),b)return!1}),a("#mvSaveShortcode").click(function(){var b=!1;if(a("#mvSaveShortcodeFrm input").removeClass("mv-error-field"),""==a("#shortName").val()&&(a("#shortName").addClass("mv-error-field"),b=!0),""==a("#displayHeight").val()&&(a("#displayHeight").addClass("mv-error-field"),b=!0),""==a("#canvasColor").val()&&(a("#canvasColor").addClass("mv-error-field"),b=!0),""==a("#captionColor").val()&&(a("#captionColor").addClass("mv-error-field"),b=!0),b)return!1})})},function(a){mvAdmin.initialize(a)}(jQuery);